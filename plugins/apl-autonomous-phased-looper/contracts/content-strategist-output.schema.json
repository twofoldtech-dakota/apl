{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "content-strategist-output.schema.json",
  "title": "ContentStrategistOutput",
  "description": "Output contract for content strategist agent - defines the structure of generated or audited content results",
  "type": "object",
  "required": ["status"],
  "properties": {
    "status": {
      "type": "string",
      "enum": ["success", "needs_revision", "needs_input", "failure"],
      "description": "Outcome status of the content operation"
    },
    "action_performed": {
      "type": "string",
      "enum": ["generate", "audit", "optimize"],
      "description": "Action that was performed"
    },
    "content": {
      "type": "object",
      "description": "Generated or optimized content",
      "properties": {
        "title": {
          "type": "string",
          "maxLength": 70,
          "description": "SEO-optimized title"
        },
        "meta_description": {
          "type": "string",
          "maxLength": 160,
          "description": "Meta description for search results"
        },
        "body": {
          "type": "string",
          "description": "Full content body in specified format"
        },
        "excerpt": {
          "type": "string",
          "maxLength": 300,
          "description": "Short excerpt or summary"
        },
        "structured_data": {
          "type": "object",
          "description": "JSON-LD schema markup"
        },
        "frontmatter": {
          "type": "object",
          "description": "Frontmatter for markdown/MDX files",
          "properties": {
            "title": { "type": "string" },
            "description": { "type": "string" },
            "date": { "type": "string", "format": "date" },
            "author": { "type": "string" },
            "tags": { "type": "array", "items": { "type": "string" } },
            "image": { "type": "string" },
            "draft": { "type": "boolean" }
          }
        },
        "keywords_used": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Keywords included in content"
        },
        "headings": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "level": { "type": "integer", "minimum": 1, "maximum": 6 },
              "text": { "type": "string" }
            }
          },
          "description": "Heading structure of content"
        },
        "internal_links": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Internal links included"
        },
        "external_links": {
          "type": "array",
          "items": { "type": "string" },
          "description": "External links included"
        },
        "image_suggestions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "placement": { "type": "string" },
              "description": { "type": "string" },
              "alt_text": { "type": "string" }
            }
          },
          "description": "Suggested image placements"
        }
      }
    },
    "quality_metrics": {
      "type": "object",
      "description": "Content quality measurements",
      "properties": {
        "seo_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall SEO optimization score"
        },
        "readability_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Flesch-Kincaid readability score"
        },
        "readability_grade": {
          "type": "string",
          "description": "Grade level (e.g., 'Grade 8')"
        },
        "word_count": {
          "type": "integer",
          "description": "Total word count"
        },
        "keyword_density": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Primary keyword density (0-1)"
        },
        "heading_structure_valid": {
          "type": "boolean",
          "description": "Whether heading hierarchy is correct"
        },
        "has_structured_data": {
          "type": "boolean",
          "description": "Whether JSON-LD is included"
        },
        "has_meta_description": {
          "type": "boolean",
          "description": "Whether meta description is present"
        },
        "accessibility_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Accessibility compliance score"
        },
        "accessibility_issues": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "severity": { "type": "string", "enum": ["error", "warning", "info"] },
              "message": { "type": "string" },
              "location": { "type": "string" }
            }
          },
          "description": "Accessibility issues found"
        },
        "brand_voice_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Brand voice consistency score"
        }
      }
    },
    "audit_results": {
      "type": "object",
      "description": "Results from content audit (when action is audit)",
      "properties": {
        "seo_issues": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "severity": { "type": "string", "enum": ["critical", "warning", "info"] },
              "message": { "type": "string" },
              "current_value": { "type": "string" },
              "recommended_value": { "type": "string" }
            }
          }
        },
        "content_gaps": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Missing content elements"
        },
        "improvement_opportunities": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Potential improvements"
        }
      }
    },
    "recommendations": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Actionable recommendations for improvement"
    },
    "files_created": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Paths to created files"
    },
    "files_modified": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Paths to modified files"
    },
    "error": {
      "type": "object",
      "description": "Error details if status is failure",
      "properties": {
        "code": { "type": "string" },
        "message": { "type": "string" },
        "details": { "type": "string" }
      }
    },
    "questions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "question": { "type": "string" },
          "options": { "type": "array", "items": { "type": "string" } }
        }
      },
      "description": "Questions for user when status is needs_input"
    }
  }
}
